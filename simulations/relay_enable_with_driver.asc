Version 4
SHEET 1 1036 1028
WIRE -384 -352 -448 -352
WIRE -288 -352 -288 -400
WIRE -288 -352 -384 -352
WIRE -240 -352 -288 -352
WIRE -192 -352 -240 -352
WIRE 144 -352 -64 -352
WIRE -448 -336 -448 -352
WIRE -384 -336 -384 -352
WIRE -256 -320 -288 -320
WIRE -192 -320 -256 -320
WIRE -16 -320 -64 -320
WIRE 80 -320 64 -320
WIRE 144 -320 144 -352
WIRE -192 -288 -208 -288
WIRE -48 -288 -64 -288
WIRE 80 -272 80 -320
WIRE 144 -272 144 -288
WIRE 144 -272 80 -272
WIRE -256 -256 -288 -256
WIRE -192 -256 -256 -256
WIRE -48 -256 -64 -256
WIRE 144 -256 144 -272
WIRE -448 -240 -448 -272
WIRE -384 -240 -384 -272
WIRE -1264 -144 -1392 -144
WIRE -1024 -144 -1184 -144
WIRE -1024 -96 -1024 -144
WIRE -1104 -48 -1120 -48
WIRE -1072 -48 -1104 -48
WIRE -928 0 -1024 0
WIRE -752 0 -848 0
WIRE -640 0 -752 0
WIRE 128 0 -560 0
WIRE 432 0 320 0
WIRE -1392 16 -1392 -144
WIRE -1024 48 -1024 0
WIRE -752 64 -752 0
WIRE -1392 80 -1392 16
WIRE -1024 80 -1024 48
WIRE 432 80 432 0
WIRE -1104 128 -1120 128
WIRE -1072 128 -1104 128
WIRE -1392 208 -1392 160
WIRE -1264 208 -1392 208
WIRE -1024 208 -1024 176
WIRE -1024 208 -1184 208
WIRE -752 208 -752 128
WIRE -752 208 -1024 208
WIRE 432 208 432 144
WIRE 432 208 -752 208
WIRE -1392 240 -1392 208
WIRE -528 336 -592 336
WIRE 0 336 -528 336
WIRE -1392 368 -1392 320
WIRE 0 368 0 336
WIRE -64 416 -80 416
WIRE 128 416 128 0
WIRE 176 416 128 416
WIRE 320 432 320 0
WIRE 320 432 240 432
WIRE -592 448 -592 336
WIRE -528 448 -528 336
WIRE -304 464 -352 464
WIRE -192 464 -304 464
WIRE -144 464 -192 464
WIRE 0 480 0 464
WIRE 176 480 0 480
WIRE -304 496 -304 464
WIRE -896 512 -896 496
WIRE -768 512 -768 496
WIRE -192 512 -192 464
WIRE 0 512 0 480
WIRE 176 512 128 512
WIRE -896 560 -896 544
WIRE -768 560 -768 544
WIRE -592 608 -592 512
WIRE -528 608 -528 512
WIRE -528 608 -592 608
WIRE -304 608 -304 560
WIRE -304 608 -528 608
WIRE -192 608 -192 592
WIRE -192 608 -304 608
WIRE -80 608 -80 592
WIRE -80 608 -192 608
WIRE 0 608 0 592
WIRE 0 608 -80 608
WIRE 128 608 128 512
WIRE 128 608 0 608
WIRE 0 640 0 608
FLAG -1392 368 0
FLAG -896 496 enable_relay
FLAG -896 560 0
FLAG 0 336 +18V
FLAG -352 464 enable_relay
FLAG 0 640 0
FLAG -768 496 +18V
FLAG -768 560 0
FLAG 432 0 vo1_p
FLAG -1392 16 vi
FLAG 432 208 vo1_n
FLAG -1200 -48 GH
FLAG -1200 128 GL
FLAG -1024 48 HS
FLAG 144 -256 0
FLAG -48 -288 0
FLAG -288 -400 +12V
FLAG -256 -320 HB
FLAG -256 -256 HS
FLAG -48 -256 GL
FLAG -208 -288 GH
FLAG 144 -352 PWM
FLAG -240 -352 vcc
FLAG -384 -240 0
FLAG -448 -240 0
SYMBOL voltage -1392 64 M0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=100m
SYMATTR InstName Vi
SYMATTR Value {Vi}
SYMBOL pnp -64 464 M180
SYMATTR InstName Q1
SYMATTR Value BC857A
SYMBOL res -16 496 R0
SYMATTR InstName R2
SYMATTR Value 1k
SYMBOL MiniSyms4\\voltage- -768 528 R0
WINDOW 123 0 0 Left 0
WINDOW 39 11 39 Left 0
SYMATTR SpiceLine Rser=100m
SYMATTR InstName V1
SYMATTR Value 15
SYMBOL res -64 608 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL npn -144 416 R0
SYMATTR InstName Q2
SYMATTR Value BC847A
SYMBOL cap -544 448 R0
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL res -176 608 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL cap -320 496 R0
SYMATTR InstName C2
SYMATTR Value 100n
SYMBOL MiniSyms4\\voltage- 144 -304 R0
WINDOW 3 -17 -49 VRight 0
WINDOW 123 0 0 Left 0
WINDOW 39 7 17 Left 0
SYMATTR Value PULSE(0 5 1u 1n 1n 5u 10u)
SYMATTR InstName PWM1
SYMBOL EXTRA\\IRF\\NMOSFET\\IRFP4332PBF -1056 -48 R0
WINDOW 3 63 30 VLeft 0
SYMATTR InstName U2
SYMBOL EXTRA\\IRF\\NMOSFET\\IRFP4332PBF -1056 128 R0
WINDOW 3 63 30 VLeft 0
SYMATTR InstName U3
SYMBOL cap -272 -256 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C3
SYMATTR Value 100n
SYMBOL AutoGenerated\\lm5104 -128 -304 R0
SYMATTR InstName U4
SYMBOL res -1104 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 1
SYMBOL res -1104 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 1
SYMBOL res 80 -336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 100k
SYMBOL ind -832 -16 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L1
SYMATTR Value 300u
SYMBOL cap -768 64 R0
SYMATTR InstName C4
SYMATTR Value {4*470u}
SYMBOL cap 416 80 R0
SYMATTR InstName C6
SYMATTR Value 10000
SYMATTR SpiceLine Rser=100m
SYMATTR Value2 ic=12
SYMBOL MiniSyms4\\voltage- -896 528 M0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 5 200m 1e-9 1e-9 200m 400m 0)
SYMBOL res -1280 -128 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R12
SYMATTR Value 100m
SYMBOL res -1280 224 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R13
SYMATTR Value 100m
SYMBOL res -1408 224 R0
SYMATTR InstName R16
SYMATTR Value 100m
SYMBOL EXTRA\\Relays\\rly_spdt0 208 432 R0
SYMATTR SpiceModel ""
SYMATTR InstName U5
SYMATTR SpiceLine VNOM=24  RCOIL=380  VON=0.625  VOFF=0.620 RON=0.1  ROFF=1G  COFF=5.7p  LSER=5n  CCOUP=5.7p
SYMATTR SpiceLine2 TON=1m TOFF=1m  LCOIL=330m CCOIL=50n
SYMBOL cap -400 -336 R0
SYMATTR InstName C5
SYMATTR Value 10u
SYMBOL cap -464 -336 R0
SYMATTR InstName C7
SYMATTR Value 100n
SYMBOL cap -608 448 R0
SYMATTR InstName C8
SYMATTR Value 10u
SYMBOL res -656 16 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R4
SYMATTR Value 100m
TEXT -952 688 Left 2 !.param Vi = 50\n.param Vo = 15\n.param Ro = 81\n.param Io = Vo/Ro
TEXT -952 656 Left 2 !.tran 0 1 0 startup
TEXT -280 -192 Left 2 !;tran 0 10m 0
TEXT -944 816 Left 2 !.include relay.lib
TEXT -960 840 Left 0 ;Parameters for RELAY\n-----------------\nNominal Voltage  VNOM=5  \nCoil Resistance   RCOIL=150\nContact Resistance  RON=0.1 \nOff Isolation  ROFF=1G\nSwitiching Time  TON=5m \nMinimum Coil Voltage On-Ratio  VON=0.7 \nMaximum Coil Voltage Off-Ratio  VOFF=0.3 \nCoil Inductance  LCOIL=0.15 \nCoil Capacitance CCOIL=1f \nContact Off Capacitance  COFF=1f \nContact Coupling Capacitance  CCOUP=1f\nContact Series Inductance  Lser=1p
